/*!
 * Copyright (c) 2012 Mike Green <myatus@gmail.com>
 * Portions Copyright Noah Sloan <noah.sloan@gmail.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 *
 */
if(typeof cookillian==="undefined"){var cookillian={}}(function(at,a2){var aT=a2.document;function ay(b){var a=aT.createElement("div");aT.body.insertBefore(a,null);at.replaceWith(a,'<script type="text/javascript">'+b+"<\/script>")}at=at||(function(a){return{ajax:a.ajax,$:function(b){return a(b)[0]},replaceWith:function(f,b){var c=a(f)[0];var d=c.nextSibling,e=c.parentNode;a(c).remove();if(d){a(d).before(b)}else{a(e).append(b)}},onLoad:function(b){a(b)},copyAttrs:function(b,f){var d=a(f),g=b.attributes;for(var e=0,h=g.length;e<h;e++){if(g[e]&&g[e].value){try{d.attr(g[e].name,g[e].value)}catch(c){}}}}}})(a2.jQuery);at.copyAttrs=at.copyAttrs||function(){};at.onLoad=at.onLoad||function(){throw"error: autoAsync cannot be used without jQuery or defining writeCaptureSupport.onLoad"};function ah(a,b){for(var d=0,c=a.length;d<c;d++){if(b(a[d])===false){return}}}function aG(a){return Object.prototype.toString.call(a)==="[object Function]"}function aM(a){return Object.prototype.toString.call(a)==="[object String]"}function aH(a,c,b){return Array.prototype.slice.call(a,c||0,b||a&&a.length)}function au(a,b){var d=false;ah(a,c);function c(e){return !(d=b(e))}return d}function al(a){this._queue=[];this._children=[];this._parent=a;if(a){a._addChild(this)}}al.prototype={_addChild:function(a){this._children.push(a)},push:function(a){this._queue.push(a);this._bubble("_doRun")},pause:function(){this._bubble("_doPause")},resume:function(){this._bubble("_doResume")},_bubble:function(b){var a=this;while(!a[b]){a=a._parent}return a[b]()},_next:function(){if(au(this._children,b)){return true}function b(c){return c._next()}var a=this._queue.shift();if(a){a()}return !!a}};function aU(a){if(a){return new al(a)}al.call(this);this.paused=0}aU.prototype=(function(){function a(){}a.prototype=al.prototype;return new a()})();aU.prototype._doRun=function(){if(!this.running){this.running=true;try{while(this.paused<1&&this._next()){}}finally{this.running=false}}};aU.prototype._doPause=function(){this.paused++};aU.prototype._doResume=function(){this.paused--;this._doRun()};function ak(){}ak.prototype={_html:"",open:function(){this._opened=true;if(this._delegate){this._delegate.open()}},write:function(a){if(this._closed){return}this._written=true;if(this._delegate){this._delegate.write(a)}else{this._html+=a}},writeln:function(a){this.write(a+"\n")},close:function(){this._closed=true;if(this._delegate){this._delegate.close()}},copyTo:function(a){this._delegate=a;a.foobar=true;if(this._opened){a.open()}if(this._written){a.write(this._html)}if(this._closed){a.close()}}};var aY=(function(){var b={f:aT.getElementById};try{b.f.call(aT,"abc");return true}catch(a){return false}})();function ao(a){ah(a,function(c){var b=aT.getElementById(c.id);if(!b){aR("<proxyGetElementById - finish>","no element in writen markup with id "+c.id);return}ah(c.el.childNodes,function(d){b.appendChild(d)});if(b.contentWindow){a2.setTimeout(function(){c.el.contentWindow.document.copyTo(b.contentWindow.document)},1)}at.copyAttrs(c.el,b)})}function aJ(b,a){if(a&&a[b]===false){return false}return a&&a[b]||aO[b]}function aD(o,a){var h=[],j=aJ("proxyGetElementById",a),g=aJ("forceLastScriptTag",a),b=aJ("writeOnGetElementById",a),m=aJ("immediateWrites",a),e={write:aT.write,writeln:aT.writeln,finish:function(){},out:""};o.state=e;aT.write=m?i:c;aT.writeln=m?f:p;if(j||b){e.getEl=aT.getElementById;aT.getElementById=n;if(b){findEl=d}else{findEl=l;e.finish=function(){ao(h)}}}if(g){e.getByTag=aT.getElementsByTagName;aT.getElementsByTagName=function(q){var r=aH(aY?e.getByTag.call(aT,q):e.getByTag(q));if(q==="script"){r.push(at.$(o.target))}return r};var k=e.finish;e.finish=function(){k();aT.getElementsByTagName=e.getByTag}}function c(q){e.out+=q}function p(q){e.out+=q+"\n"}function i(r){var q=at.$(o.target);var s=aT.createElement("div");q.parentNode.insertBefore(s,q);at.replaceWith(s,ag(r))}function f(r){var q=at.$(o.target);var s=aT.createElement("div");q.parentNode.insertBefore(s,q);at.replaceWith(s,ag(r)+"\n")}function l(q){var r=aT.createElement("div");h.push({id:q,el:r});r.contentWindow={document:new ak()};return r}function d(s){var r=at.$(o.target);var q=aT.createElement("div");r.parentNode.insertBefore(q,r);at.replaceWith(q,e.out);e.out="";return aY?e.getEl.call(aT,s):e.getEl(s)}function n(q){var r=aY?e.getEl.call(aT,q):e.getEl(q);return r||findEl(q)}return e}function ac(a){aT.write=a.write;aT.writeln=a.writeln;if(a.getEl){aT.getElementById=a.getEl}return a.out}function aj(a){return a&&a.replace(/^\s*<!(\[CDATA\[|--)/,"").replace(/(\]\]|--)>\s*$/,"")}function a1(){}function aZ(b,a){console.error("Error",a,"executing code:",b)}var aR=aG(a2.console&&console.error)?aZ:a1;function af(c,e,d){var b=aD(e,d);try{ay(aj(c))}catch(a){aR(c,a)}finally{ac(b)}return b}function ai(b){var a=/^(\w+:)?\/\/([^\/?#]+)/.exec(b);return a&&(a[1]&&a[1]!=location.protocol||a[2]!=location.host)}function ae(a){return new RegExp("[\\s\\r\\n]"+a+"[\\s\\r\\n]*=[\\s\\r\\n]*(?:([\"'])([\\s\\S]*?)\\1|([^\\s>]+))","i")}function aS(b){var a=ae(b);return function(d){var c=a.exec(d)||[];return c[2]||c[3]}}var aK=/(<script[^>]*>)([\s\S]*?)<\/script>/ig,aw=/<script[^>]*\/>/ig,aP=ae("src"),aC=aS("src"),aL=aS("type"),aB=aS("language"),av="__document_write_ajax_callbacks__",ax="__document_write_ajax_div-",aW="window['"+av+"']['%d']();",aQ=a2[av]={},aE='<script type="text/javascript">'+aW+"<\/script>",ap=0;function a0(){return(++ap).toString()}function aq(c,a){var b;if(aG(c)){b=c;c=null}c=c||{};b=b||c&&c.done;c.done=a?function(){a(b)}:b;return c}var az=new aU();var aA=[];var aX=window._debugWriteCapture?function(){}:function(c,a,b){aA.push({type:c,src:a,data:b})};var am=window._debugWriteCapture?function(){}:function(){aA.push(arguments)};function Q(b){var a=a0();aQ[a]=function(){b();delete aQ[a]};return a}function an(a){return aE.replace(/%d/,Q(a))}function ag(f,b,i,d){var e=i&&new aU(i)||az;b=aq(b);var g=aJ("done",b);var a="";var j=aJ("fixUrls",b);if(!aG(j)){j=function(k){return k}}if(aG(g)){a=an(function(){e.push(g)})}return f.replace(aK,c).replace(aw,h)+a;function h(k){return c(k,k.substring(0,k.length-2)+">","")}function c(C,k,D){var w=aC(k),y=aL(k)||"",o=aB(k)||"",q=(!y&&!o)||y.toLowerCase().indexOf("javascript")!==-1||o.toLowerCase().indexOf("javascript")!==-1;aX("replace",w,C);if(!q){return C}var z=Q(r),t=ax+z,l,A={target:"#"+t,parent:d};function r(){e.push(l)}if(w){w=j(w);k=k.replace(aP,"");if(ai(w)){l=s}else{if(aJ("asyncAll",b)){l=u()}else{l=m}}}else{l=v}function v(){E(D)}function m(){at.ajax({url:w,type:"GET",dataType:"text",async:false,success:function(F){E(F)}})}function B(G,F,H){aR("<XHR for "+w+">",H);e.resume()}function p(){return an(function(){e.resume()})}function u(){var G,H;function F(J,K){if(!G){H=J;return}try{E(J,p())}catch(I){aR(J,I)}}at.ajax({url:w,type:"GET",dataType:"text",async:true,success:F,error:B});return function(){G=true;if(H){E(H)}else{e.pause()}}}function s(F){var G=aD(A,b);e.pause();aX("pause",w);aN(A.target,w,H);function H(I,J,K){aX("out",w,G.out);n(ac(G),an(G.finish)+p());aX("resume",w)}}function E(H,F){var G=af(H,A,b);F=an(G.finish)+(F||"");n(G.out,F)}function x(F){var G={};for(var H in F){if(F.hasOwnProperty(H)){G[H]=F[H]}}delete G.done;return G}function n(G,F){at.replaceWith(A.target,ag(G,x(b),e,A)+(F||""))}return'<div style="display: none" id="'+t+'"></div>'+k+aW.replace(/%d/,z)+"<\/script>"}}function aN(b,d,a){var f=document.createElement("script");f.src=d;b=at.$(b);var e=false,c=b.parentNode;f.onload=f.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){e=true;a();f.onload=f.onreadystatechange=null;c.removeChild(f)}};c.insertBefore(f,b)}function ar(c,a){var b=az;ah(c,function(e){b.push(d);function d(){e.action(ag(e.html,e.options,b),e)}});if(a){b.push(a)}}function ad(b){var a=b;while(a&&a.nodeType===1){b=a;a=a.lastChild;while(a&&a.nodeType!==1){a=a.previousSibling}}return b}function aV(f){var d=aT.write,a=aT.writeln,e,c=[];aT.writeln=function(g){aT.write(g+"\n")};var b;aT.write=function(g){var h=ad(aT.body);if(h!==e){e=h;c.push(b={el:h,out:[]})}b.out.push(g)};at.onLoad(function(){var l,i,g,j,k;f=aq(f);k=f.done;f.done=function(){aT.write=d;aT.writeln=a;if(k){k()}};for(var m=0,h=c.length;m<h;m++){l=c[m].el;i=aT.createElement("div");l.parentNode.insertBefore(i,l.nextSibling);g=c[m].out.join("");j=h-m===1?ag(g,f):ag(g);at.replaceWith(i,j)}})}function aF(i){var h=document.getElementsByTagName("script"),a,m,d,b,l,j,k=0,f=i?an(function(){if(++k>=g.length){i()}}):"",g=[];for(var e=0,c=h.length;e<c;e++){a=h[e];l=a.getAttribute("extsrc");j=a.getAttribute("asyncsrc");if(l||j){g.push({ext:l,async:j,s:a})}}for(e=0,c=g.length;e<c;e++){m=g[e];if(m.ext){d='<script type="text/javascript" src="'+m.ext+'"> <\/script>';at.replaceWith(m.s,ag(d)+f)}else{if(m.async){d='<script type="text/javascript" src="'+m.async+'"> <\/script>';at.replaceWith(m.s,ag(d,{asyncAll:true},new aU())+f)}}}}var aI="writeCapture";var aO=a2[aI]={_original:a2[aI],support:at,fixUrls:function(a){return a.replace(/&amp;/g,"&")},noConflict:function(){a2[aI]=this._original;return this},debug:aA,proxyGetElementById:false,_forTest:{Q:aU,GLOBAL_Q:az,$:at,matchAttr:aS,slice:aH,capture:aD,uncapture:ac,captureWrite:af},replaceWith:function(c,a,b){at.replaceWith(c,ag(a,b))},html:function(d,a,c){var b=at.$(d);b.innerHTML="<span/>";at.replaceWith(b.firstChild,ag(a,c))},load:function(c,a,b){at.ajax({url:a,dataType:"text",type:"GET",success:function(d){aO.html(c,d,b)}})},extsrc:aF,autoAsync:aV,sanitize:ag,sanitizeSerial:ar}})(this.writeCaptureSupport,this);(function(z,C,s){var D={html:y};z.each(["append","prepend","after","before","wrap","wrapAll","replaceWith","wrapInner"],function(){D[this]=x(this)});function F(a){return Object.prototype.toString.call(a)=="[object String]"}function q(a,b,c,d){if(arguments.length==0){return r.call(this)}var e=D[a];if(a=="load"){return u.call(this,b,c,d)}if(!e){w(a)}return E.call(this,b,c,e)}z.fn.writeCapture=q;var v="__writeCaptureJsProxied-fghebd__";function r(){if(this[v]){return this}var a=this;function b(){var c=this,d=false;this[v]=true;z.each(D,function(e){var f=a[e];if(!f){return}c[e]=function(i,g,h){if(!d&&F(i)){try{d=true;return q.call(c,e,i,g,h)}finally{d=false}}return f.apply(c,arguments)}});this.pushStack=function(){return r.call(a.pushStack.apply(c,arguments))};this.endCapture=function(){return a}}b.prototype=a;return new b()}function E(b,c,a){var e,d=this;if(c&&c.done){e=c.done;delete c.done}else{if(z.isFunction(c)){e=c;c=null}}C.sanitizeSerial(z.map(this,function(f){return{html:b,options:c,action:function(g){a.call(f,g)}}}),e&&function(){e.call(d)}||e);return this}function y(a){z(this).html(a)}function x(a){return function(b){z(this)[a](b)}}function u(c,d,a){var e=this,f,b=c.indexOf(" ");if(b>=0){f=c.slice(b,c.length);c=c.slice(0,b)}if(z.isFunction(a)){d=d||{};d.done=a}return z.ajax({url:c,type:d&&d.type||"GET",dataType:"html",data:d&&d.params,complete:A(e,d,f)})}function A(b,a,c){return function(e,f){if(f=="success"||f=="notmodified"){var d=t(e.responseText,c);E.call(b,d,a,y)}}}var B=/jquery-writeCapture-script-placeholder-(\d+)-wc/g;function t(b,c){if(!c||!b){return b}var a=0,d={};return z("<div/>").append(b.replace(/<script(.|\s)*?\/script>/g,function(e){d[a]=e;return"jquery-writeCapture-script-placeholder-"+(a++)+"-wc"})).find(c).html().replace(B,function(f,e){return d[e]})}function w(a){throw"invalid method parameter "+a}z.writeCapture=C})(jQuery,writeCapture.noConflict());(function(b){b.extend(cookillian,{getAjaxData:function(a,j,g){var h=(typeof g==="function"),i=false;b.ajax({type:"POST",dataType:"json",url:cookillian_ajax.url,timeout:5000,async:h,data:{action:cookillian_ajax.action,func:a,data:j,_ajax_nonce:cookillian_ajax.nonce},success:function(c){if(c.nonce===cookillian_ajax.nonceresponse&&c.stat==="ok"){i=c.data;if(h){g(i)}}}});return i},init:function(){var a=document.referrer||false,e,f;f=function(c){if(typeof c.debug!=="undefined"&&typeof console==="object"){console.log(c)}if(typeof c.header_script!=="undefined"){b("head").append(c.header_script);delete c.header_script}b.extend(cookillian,c)};b.extend(this,{blocked_cookies:true,implied_consent:false,opted_out:false,opted_in:false,is_manual:false,has_nst:false});if(!cookillian.use_async_ajax){e=cookillian.getAjaxData("init",{true_referrer:a});if(e){f(e)}}else{cookillian.getAjaxData("init",{true_referrer:a},function(c){f(c);cookillian.postInit()})}},postInit:function(){b(document).ready(function(a){if(typeof cookillian.footer_script!=="undefined"){a("body").append(cookillian.footer_script);delete cookillian.footer_script}cookillian.displayAlert();a(document).trigger("cookillian_ready",cookillian)});b(document).trigger("cookillian_load",cookillian)},displayAlert:function(){var d=b(".cookillian-alert"),a=(cookillian.blocked_cookies&&!cookillian.opted_out);if(!d.length){return}b(".close",d).click(function(c){d.fadeOut("slow");c.preventDefault()});b(".btn-ok",d).click(function(c){cookillian.optIn();d.fadeOut("slow");c.preventDefault()});b(".btn-no",d).click(function(c){cookillian.optOut();d.fadeOut("slow");c.preventDefault()});if(a){if(!cookillian.is_manual){d.detach().prependTo("body").fadeIn("slow")}else{d.show()}if((typeof cookillian.debug==="undefined"||!cookillian.debug.logged_in)&&!cookillian.has_nst){cookillian.getAjaxData("displayed",true,function(){})}}},deleteCookies:function(){return cookillian.getAjaxData("delete_cookies",true)},optIn:function(){return cookillian.getAjaxData("opt_in",true)},optOut:function(){return cookillian.getAjaxData("opt_out",true)},resetOptinout:function(){return cookillian.getAjaxData("reset_optinout",true)},insertString:function(l,j,i,k){var a=b(l),h;if(!a.length){return}i=i||"";k=k||"blocked_cookies";b(document).on("cookillian_ready",function(){if(typeof k==="string"){k=Boolean(cookillian[k])}h=(k===false)?i:j;b(a).writeCapture().append(h)})}});cookillian.init();if(!cookillian.use_async_ajax){cookillian.postInit()}b(document).ready(function(){console.log("Ready!")})}(jQuery));